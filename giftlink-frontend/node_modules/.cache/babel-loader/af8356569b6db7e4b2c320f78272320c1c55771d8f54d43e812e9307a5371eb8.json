{"ast":null,"code":"var _jsxFileName = \"/home/project/fullstack-capstone-project/giftlink-frontend/src/components/LoginPage/LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { urlConfig } from '../../config'; // Import backend URL configuration\nimport { useAppContext } from '../../context/AuthContext'; // Import AuthContext\nimport { useNavigate } from 'react-router-dom'; // For navigation\nimport './LoginPage.css'; // Import CSS file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginPage() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [incorrect, setIncorrect] = useState(''); // State for error messages\n\n  const navigate = useNavigate(); // For programmatic navigation\n  const bearerToken = sessionStorage.getItem('auth-token'); // Check if user is already logged in\n  const {\n    setIsLoggedIn,\n    setUserName\n  } = useAppContext(); // Global state management\n\n  // Redirect if user is already logged in\n  useEffect(() => {\n    if (bearerToken) {\n      navigate('/app');\n    }\n  }, [navigate, bearerToken]);\n  const handleLogin = async () => {\n    try {\n      console.log(\"Inside handleLogin\");\n      console.log({\n        email,\n        password\n      });\n\n      // Task 1: Access data coming from fetch API\n      const response = await fetch(`${urlConfig.backendUrl}/api/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: bearerToken ? `Bearer ${bearerToken}` : ''\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      const json = await response.json(); // Parse JSON response\n\n      if (response.ok) {\n        // Task 2: Set user details in session storage\n        sessionStorage.setItem('auth-token', json.authtoken);\n        sessionStorage.setItem('name', json.userName);\n        sessionStorage.setItem('email', json.userEmail);\n\n        // Task 3: Set the user's state to log in using the useAppContext\n        setIsLoggedIn(true);\n        setUserName(json.userName);\n\n        // Task 4: Navigate to the MainPage after logging in\n        navigate('/app');\n      } else {\n        // Task 5: Clear input and set an error message if the password is incorrect\n        setEmail('');\n        setPassword('');\n        setIncorrect(\"Wrong password. Try again.\");\n\n        // Optional: Clear out error message after 2 seconds\n        setTimeout(() => {\n          setIncorrect(\"\");\n        }, 2000);\n      }\n    } catch (e) {\n      console.error('Error during login:', e.message);\n      setIncorrect('An unexpected error occurred. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 col-lg-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-card p-4 border rounded shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-center mb-4 font-weight-bold\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), incorrect && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-danger text-center\",\n            children: incorrect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 39\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => e.preventDefault(),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                className: \"form-label\",\n                children: \"Email address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"email\",\n                type: \"email\",\n                className: \"form-control\",\n                placeholder: \"Enter your email\",\n                value: email,\n                onChange: e => setEmail(e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"password\",\n                className: \"form-label\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"password\",\n                type: \"password\",\n                className: \"form-control\",\n                placeholder: \"Enter your password\",\n                value: password,\n                onChange: e => setPassword(e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary w-100 mb-3\",\n              onClick: handleLogin,\n              type: \"button\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-4 text-center\",\n            children: [\"New here? \", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/app/register\",\n              className: \"text-primary\",\n              children: \"Register Here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n_s(LoginPage, \"nLqF67ufWjKM3AE8jVDK1kANBfo=\", false, function () {\n  return [useNavigate, useAppContext];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useEffect","urlConfig","useAppContext","useNavigate","jsxDEV","_jsxDEV","LoginPage","_s","email","setEmail","password","setPassword","incorrect","setIncorrect","navigate","bearerToken","sessionStorage","getItem","setIsLoggedIn","setUserName","handleLogin","console","log","response","fetch","backendUrl","method","headers","Authorization","body","JSON","stringify","json","ok","setItem","authtoken","userName","userEmail","setTimeout","e","error","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","preventDefault","htmlFor","id","type","placeholder","value","onChange","target","required","onClick","href","_c","$RefreshReg$"],"sources":["/home/project/fullstack-capstone-project/giftlink-frontend/src/components/LoginPage/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { urlConfig } from '../../config'; // Import backend URL configuration\nimport { useAppContext } from '../../context/AuthContext'; // Import AuthContext\nimport { useNavigate } from 'react-router-dom'; // For navigation\nimport './LoginPage.css'; // Import CSS file\n\nfunction LoginPage() {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [incorrect, setIncorrect] = useState(''); // State for error messages\n\n    const navigate = useNavigate(); // For programmatic navigation\n    const bearerToken = sessionStorage.getItem('auth-token'); // Check if user is already logged in\n    const { setIsLoggedIn, setUserName } = useAppContext(); // Global state management\n\n    // Redirect if user is already logged in\n    useEffect(() => {\n        if (bearerToken) {\n            navigate('/app');\n        }\n    }, [navigate, bearerToken]);\n\n    const handleLogin = async () => {\n        try {\n            console.log(\"Inside handleLogin\");\n            console.log({\n                email,\n                password\n            });\n    \n            // Task 1: Access data coming from fetch API\n            const response = await fetch(`${urlConfig.backendUrl}/api/auth/login`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: bearerToken ? `Bearer ${bearerToken}` : '',\n                },\n                body: JSON.stringify({\n                    email,\n                    password,\n                }),\n            });\n    \n            const json = await response.json(); // Parse JSON response\n    \n            if (response.ok) {\n                // Task 2: Set user details in session storage\n                sessionStorage.setItem('auth-token', json.authtoken);\n                sessionStorage.setItem('name', json.userName);\n                sessionStorage.setItem('email', json.userEmail);\n    \n                // Task 3: Set the user's state to log in using the useAppContext\n                setIsLoggedIn(true);\n                setUserName(json.userName);\n    \n                // Task 4: Navigate to the MainPage after logging in\n                navigate('/app');\n            } else {\n                // Task 5: Clear input and set an error message if the password is incorrect\n                setEmail('');\n                setPassword('');\n                setIncorrect(\"Wrong password. Try again.\");\n    \n                // Optional: Clear out error message after 2 seconds\n                setTimeout(() => {\n                    setIncorrect(\"\");\n                }, 2000);\n            }\n        } catch (e) {\n            console.error('Error during login:', e.message);\n            setIncorrect('An unexpected error occurred. Please try again.');\n        }\n    };\n\n    return (\n        <div className=\"container mt-5\">\n            <div className=\"row justify-content-center\">\n                <div className=\"col-md-6 col-lg-4\">\n                    <div className=\"login-card p-4 border rounded shadow-sm\">\n                        <h2 className=\"text-center mb-4 font-weight-bold\">Login</h2>\n\n                        {/* Error Message */}\n                        {incorrect && <p className=\"text-danger text-center\">{incorrect}</p>}\n\n                        <form onSubmit={(e) => e.preventDefault()}>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"email\" className=\"form-label\">Email address</label>\n                                <input\n                                    id=\"email\"\n                                    type=\"email\"\n                                    className=\"form-control\"\n                                    placeholder=\"Enter your email\"\n                                    value={email}\n                                    onChange={(e) => setEmail(e.target.value)}\n                                    required\n                                />\n                            </div>\n\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"password\" className=\"form-label\">Password</label>\n                                <input\n                                    id=\"password\"\n                                    type=\"password\"\n                                    className=\"form-control\"\n                                    placeholder=\"Enter your password\"\n                                    value={password}\n                                    onChange={(e) => setPassword(e.target.value)}\n                                    required\n                                />\n                            </div>\n\n                            <button\n                                className=\"btn btn-primary w-100 mb-3\"\n                                onClick={handleLogin}\n                                type=\"button\"\n                            >\n                                Login\n                            </button>\n                        </form>\n\n                        <p className=\"mt-4 text-center\">\n                            New here? <a href=\"/app/register\" className=\"text-primary\">Register Here</a>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default LoginPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,cAAc,CAAC,CAAC;AAC1C,SAASC,aAAa,QAAQ,2BAA2B,CAAC,CAAC;AAC3D,SAASC,WAAW,QAAQ,kBAAkB,CAAC,CAAC;AAChD,OAAO,iBAAiB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE1B,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EACjB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAEhD,MAAMe,QAAQ,GAAGX,WAAW,CAAC,CAAC,CAAC,CAAC;EAChC,MAAMY,WAAW,GAAGC,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;EAC1D,MAAM;IAAEC,aAAa;IAAEC;EAAY,CAAC,GAAGjB,aAAa,CAAC,CAAC,CAAC,CAAC;;EAExD;EACAF,SAAS,CAAC,MAAM;IACZ,IAAIe,WAAW,EAAE;MACbD,QAAQ,CAAC,MAAM,CAAC;IACpB;EACJ,CAAC,EAAE,CAACA,QAAQ,EAAEC,WAAW,CAAC,CAAC;EAE3B,MAAMK,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACAC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;MACjCD,OAAO,CAACC,GAAG,CAAC;QACRd,KAAK;QACLE;MACJ,CAAC,CAAC;;MAEF;MACA,MAAMa,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGvB,SAAS,CAACwB,UAAU,iBAAiB,EAAE;QACnEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAEb,WAAW,GAAG,UAAUA,WAAW,EAAE,GAAG;QAC3D,CAAC;QACDc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACjBvB,KAAK;UACLE;QACJ,CAAC;MACL,CAAC,CAAC;MAEF,MAAMsB,IAAI,GAAG,MAAMT,QAAQ,CAACS,IAAI,CAAC,CAAC,CAAC,CAAC;;MAEpC,IAAIT,QAAQ,CAACU,EAAE,EAAE;QACb;QACAjB,cAAc,CAACkB,OAAO,CAAC,YAAY,EAAEF,IAAI,CAACG,SAAS,CAAC;QACpDnB,cAAc,CAACkB,OAAO,CAAC,MAAM,EAAEF,IAAI,CAACI,QAAQ,CAAC;QAC7CpB,cAAc,CAACkB,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACK,SAAS,CAAC;;QAE/C;QACAnB,aAAa,CAAC,IAAI,CAAC;QACnBC,WAAW,CAACa,IAAI,CAACI,QAAQ,CAAC;;QAE1B;QACAtB,QAAQ,CAAC,MAAM,CAAC;MACpB,CAAC,MAAM;QACH;QACAL,QAAQ,CAAC,EAAE,CAAC;QACZE,WAAW,CAAC,EAAE,CAAC;QACfE,YAAY,CAAC,4BAA4B,CAAC;;QAE1C;QACAyB,UAAU,CAAC,MAAM;UACbzB,YAAY,CAAC,EAAE,CAAC;QACpB,CAAC,EAAE,IAAI,CAAC;MACZ;IACJ,CAAC,CAAC,OAAO0B,CAAC,EAAE;MACRlB,OAAO,CAACmB,KAAK,CAAC,qBAAqB,EAAED,CAAC,CAACE,OAAO,CAAC;MAC/C5B,YAAY,CAAC,iDAAiD,CAAC;IACnE;EACJ,CAAC;EAED,oBACIR,OAAA;IAAKqC,SAAS,EAAC,gBAAgB;IAAAC,QAAA,eAC3BtC,OAAA;MAAKqC,SAAS,EAAC,4BAA4B;MAAAC,QAAA,eACvCtC,OAAA;QAAKqC,SAAS,EAAC,mBAAmB;QAAAC,QAAA,eAC9BtC,OAAA;UAAKqC,SAAS,EAAC,yCAAyC;UAAAC,QAAA,gBACpDtC,OAAA;YAAIqC,SAAS,EAAC,mCAAmC;YAAAC,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EAG3DnC,SAAS,iBAAIP,OAAA;YAAGqC,SAAS,EAAC,yBAAyB;YAAAC,QAAA,EAAE/B;UAAS;YAAAgC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAEpE1C,OAAA;YAAM2C,QAAQ,EAAGT,CAAC,IAAKA,CAAC,CAACU,cAAc,CAAC,CAAE;YAAAN,QAAA,gBACtCtC,OAAA;cAAKqC,SAAS,EAAC,MAAM;cAAAC,QAAA,gBACjBtC,OAAA;gBAAO6C,OAAO,EAAC,OAAO;gBAACR,SAAS,EAAC,YAAY;gBAAAC,QAAA,EAAC;cAAa;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACnE1C,OAAA;gBACI8C,EAAE,EAAC,OAAO;gBACVC,IAAI,EAAC,OAAO;gBACZV,SAAS,EAAC,cAAc;gBACxBW,WAAW,EAAC,kBAAkB;gBAC9BC,KAAK,EAAE9C,KAAM;gBACb+C,QAAQ,EAAGhB,CAAC,IAAK9B,QAAQ,CAAC8B,CAAC,CAACiB,MAAM,CAACF,KAAK,CAAE;gBAC1CG,QAAQ;cAAA;gBAAAb,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACX,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eAEN1C,OAAA;cAAKqC,SAAS,EAAC,MAAM;cAAAC,QAAA,gBACjBtC,OAAA;gBAAO6C,OAAO,EAAC,UAAU;gBAACR,SAAS,EAAC,YAAY;gBAAAC,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACjE1C,OAAA;gBACI8C,EAAE,EAAC,UAAU;gBACbC,IAAI,EAAC,UAAU;gBACfV,SAAS,EAAC,cAAc;gBACxBW,WAAW,EAAC,qBAAqB;gBACjCC,KAAK,EAAE5C,QAAS;gBAChB6C,QAAQ,EAAGhB,CAAC,IAAK5B,WAAW,CAAC4B,CAAC,CAACiB,MAAM,CAACF,KAAK,CAAE;gBAC7CG,QAAQ;cAAA;gBAAAb,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACX,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eAEN1C,OAAA;cACIqC,SAAS,EAAC,4BAA4B;cACtCgB,OAAO,EAAEtC,WAAY;cACrBgC,IAAI,EAAC,QAAQ;cAAAT,QAAA,EAChB;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC,eAEP1C,OAAA;YAAGqC,SAAS,EAAC,kBAAkB;YAAAC,QAAA,GAAC,YAClB,eAAAtC,OAAA;cAAGsD,IAAI,EAAC,eAAe;cAACjB,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7E,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd;AAACxC,EAAA,CA1HQD,SAAS;EAAA,QAKGH,WAAW,EAEWD,aAAa;AAAA;AAAA0D,EAAA,GAP/CtD,SAAS;AA4HlB,eAAeA,SAAS;AAAC,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}