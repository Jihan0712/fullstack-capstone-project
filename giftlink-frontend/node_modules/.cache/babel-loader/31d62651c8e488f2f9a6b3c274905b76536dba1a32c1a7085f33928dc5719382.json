{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';// Task 1: Import urlConfig\nimport{urlConfig}from'../../config';// Task 2: Import useAppContext\nimport{useAppContext}from'../../context/AuthContext';import'./RegisterPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterPage(){const[firstName,setFirstName]=useState('');const[lastName,setLastName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');// Task 4: Include a state for error message\nconst[showerr,setShowerr]=useState('');// Task 5: Create local variables for navigate and setIsLoggedIn\nconst navigate=useNavigate();const{setIsLoggedIn}=useAppContext();const handleRegister=async()=>{try{const response=await fetch(\"\".concat(urlConfig.backendUrl,\"/api/auth/register\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({firstName,lastName,email,password})});// Task 1: Access data coming from fetch API\nconst json=await response.json();if(!response.ok){// Task 5: Set an error message if registration fails\nconst errorMessage=json.error||\"Registration failed. Please try again.\";setShowerr(errorMessage);return;}// Task 2: Set user details in sessionStorage\nif(json.authtoken){sessionStorage.setItem('auth-token',json.authtoken);sessionStorage.setItem('name',\"\".concat(firstName,\" \").concat(lastName));sessionStorage.setItem('email',json.email);}// Task 3: Set the state of user to logged in\nsetIsLoggedIn(true);// Task 4: Navigate to MainPage after logging in\nnavigate('/app');}catch(e){console.log(\"Error fetching details: \"+e.message);setShowerr(\"Something went wrong. Please try again.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register-card p-4 border rounded shadow-sm\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4 font-weight-bold\",children:\"Register\"}),showerr&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:showerr}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>e.preventDefault(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"form-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"firstName\",value:firstName,onChange:e=>setFirstName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"form-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"lastName\",value:lastName,onChange:e=>setLastName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-100 mb-3\",onClick:handleRegister,type:\"button\",children:\"Register\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-center\",children:[\"Already a member? \",/*#__PURE__*/_jsx(\"a\",{href:\"/app/login\",className:\"text-primary\",children:\"Login\"})]})]})})})});}export default RegisterPage;","map":{"version":3,"names":["React","useState","useNavigate","urlConfig","useAppContext","jsx","_jsx","jsxs","_jsxs","RegisterPage","firstName","setFirstName","lastName","setLastName","email","setEmail","password","setPassword","showerr","setShowerr","navigate","setIsLoggedIn","handleRegister","response","fetch","concat","backendUrl","method","headers","body","JSON","stringify","json","ok","errorMessage","error","authtoken","sessionStorage","setItem","e","console","log","message","className","children","role","onSubmit","preventDefault","htmlFor","type","id","value","onChange","target","onClick","href"],"sources":["/home/project/fullstack-capstone-project/giftlink-frontend/src/components/RegisterPage/RegisterPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\n// Task 1: Import urlConfig\nimport { urlConfig } from '../../config';\n\n// Task 2: Import useAppContext\nimport { useAppContext } from '../../context/AuthContext';\nimport './RegisterPage.css';\n\nfunction RegisterPage() {\n    const [firstName, setFirstName] = useState('');\n    const [lastName, setLastName] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    // Task 4: Include a state for error message\n    const [showerr, setShowerr] = useState('');\n\n    // Task 5: Create local variables for navigate and setIsLoggedIn\n    const navigate = useNavigate();\n    const { setIsLoggedIn } = useAppContext();\n\n    const handleRegister = async () => {\n        try {\n            const response = await fetch(`${urlConfig.backendUrl}/api/auth/register`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    firstName,\n                    lastName,\n                    email,\n                    password\n                })\n            });\n\n            // Task 1: Access data coming from fetch API\n            const json = await response.json();\n\n            if (!response.ok) {\n                // Task 5: Set an error message if registration fails\n                const errorMessage = json.error || \"Registration failed. Please try again.\";\n                setShowerr(errorMessage);\n                return;\n            }\n\n            // Task 2: Set user details in sessionStorage\n            if (json.authtoken) {\n                sessionStorage.setItem('auth-token', json.authtoken);\n                sessionStorage.setItem('name', `${firstName} ${lastName}`);\n                sessionStorage.setItem('email', json.email);\n            }\n\n            // Task 3: Set the state of user to logged in\n            setIsLoggedIn(true);\n\n            // Task 4: Navigate to MainPage after logging in\n            navigate('/app');\n\n        } catch (e) {\n            console.log(\"Error fetching details: \" + e.message);\n            setShowerr(\"Something went wrong. Please try again.\");\n        }\n    };\n\n    return (\n        <div className=\"container mt-5\">\n            <div className=\"row justify-content-center\">\n                <div className=\"col-md-6 col-lg-4\">\n                    <div className=\"register-card p-4 border rounded shadow-sm\">\n                        <h2 className=\"text-center mb-4 font-weight-bold\">Register</h2>\n\n                        {/* Task 6: Display error message to end user */}\n                        {showerr && (\n                            <div className=\"alert alert-danger\" role=\"alert\">\n                                {showerr}\n                            </div>\n                        )}\n\n                        <form onSubmit={(e) => e.preventDefault()}>\n                            {/* First Name */}\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"firstName\" className=\"form-label\">First Name</label>\n                                <input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    id=\"firstName\"\n                                    value={firstName}\n                                    onChange={(e) => setFirstName(e.target.value)}\n                                />\n                            </div>\n\n                            {/* Last Name */}\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"lastName\" className=\"form-label\">Last Name</label>\n                                <input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    id=\"lastName\"\n                                    value={lastName}\n                                    onChange={(e) => setLastName(e.target.value)}\n                                />\n                            </div>\n\n                            {/* Email */}\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"email\" className=\"form-label\">Email address</label>\n                                <input\n                                    type=\"email\"\n                                    className=\"form-control\"\n                                    id=\"email\"\n                                    value={email}\n                                    onChange={(e) => setEmail(e.target.value)}\n                                />\n                            </div>\n\n                            {/* Password */}\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"password\" className=\"form-label\">Password</label>\n                                <input\n                                    type=\"password\"\n                                    className=\"form-control\"\n                                    id=\"password\"\n                                    value={password}\n                                    onChange={(e) => setPassword(e.target.value)}\n                                />\n                            </div>\n\n                            {/* Register Button */}\n                            <button\n                                className=\"btn btn-primary w-100 mb-3\"\n                                onClick={handleRegister}\n                                type=\"button\"\n                            >\n                                Register\n                            </button>\n                        </form>\n\n                        {/* Already registered? */}\n                        <p className=\"mt-4 text-center\">\n                            Already a member? <a href=\"/app/login\" className=\"text-primary\">Login</a>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default RegisterPage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAE9C;AACA,OAASC,SAAS,KAAQ,cAAc,CAExC;AACA,OAASC,aAAa,KAAQ,2BAA2B,CACzD,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5B,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACpB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5C;AACA,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAE1C;AACA,KAAM,CAAAmB,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEmB,aAAc,CAAC,CAAGjB,aAAa,CAAC,CAAC,CAEzC,KAAM,CAAAkB,cAAc,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAItB,SAAS,CAACuB,UAAU,uBAAsB,CACtEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBrB,SAAS,CACTE,QAAQ,CACRE,KAAK,CACLE,QACJ,CAAC,CACL,CAAC,CAAC,CAEF;AACA,KAAM,CAAAgB,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACS,IAAI,CAAC,CAAC,CAElC,GAAI,CAACT,QAAQ,CAACU,EAAE,CAAE,CACd;AACA,KAAM,CAAAC,YAAY,CAAGF,IAAI,CAACG,KAAK,EAAI,wCAAwC,CAC3EhB,UAAU,CAACe,YAAY,CAAC,CACxB,OACJ,CAEA;AACA,GAAIF,IAAI,CAACI,SAAS,CAAE,CAChBC,cAAc,CAACC,OAAO,CAAC,YAAY,CAAEN,IAAI,CAACI,SAAS,CAAC,CACpDC,cAAc,CAACC,OAAO,CAAC,MAAM,IAAAb,MAAA,CAAKf,SAAS,MAAAe,MAAA,CAAIb,QAAQ,CAAE,CAAC,CAC1DyB,cAAc,CAACC,OAAO,CAAC,OAAO,CAAEN,IAAI,CAAClB,KAAK,CAAC,CAC/C,CAEA;AACAO,aAAa,CAAC,IAAI,CAAC,CAEnB;AACAD,QAAQ,CAAC,MAAM,CAAC,CAEpB,CAAE,MAAOmB,CAAC,CAAE,CACRC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAGF,CAAC,CAACG,OAAO,CAAC,CACnDvB,UAAU,CAAC,yCAAyC,CAAC,CACzD,CACJ,CAAC,CAED,mBACIb,IAAA,QAAKqC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC3BtC,IAAA,QAAKqC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACvCtC,IAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAC9BpC,KAAA,QAAKmC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACvDtC,IAAA,OAAIqC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,CAG9D1B,OAAO,eACJZ,IAAA,QAAKqC,SAAS,CAAC,oBAAoB,CAACE,IAAI,CAAC,OAAO,CAAAD,QAAA,CAC3C1B,OAAO,CACP,CACR,cAEDV,KAAA,SAAMsC,QAAQ,CAAGP,CAAC,EAAKA,CAAC,CAACQ,cAAc,CAAC,CAAE,CAAAH,QAAA,eAEtCpC,KAAA,QAAKmC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBtC,IAAA,UAAO0C,OAAO,CAAC,WAAW,CAACL,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cACpEtC,IAAA,UACI2C,IAAI,CAAC,MAAM,CACXN,SAAS,CAAC,cAAc,CACxBO,EAAE,CAAC,WAAW,CACdC,KAAK,CAAEzC,SAAU,CACjB0C,QAAQ,CAAGb,CAAC,EAAK5B,YAAY,CAAC4B,CAAC,CAACc,MAAM,CAACF,KAAK,CAAE,CACjD,CAAC,EACD,CAAC,cAGN3C,KAAA,QAAKmC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBtC,IAAA,UAAO0C,OAAO,CAAC,UAAU,CAACL,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,WAAS,CAAO,CAAC,cAClEtC,IAAA,UACI2C,IAAI,CAAC,MAAM,CACXN,SAAS,CAAC,cAAc,CACxBO,EAAE,CAAC,UAAU,CACbC,KAAK,CAAEvC,QAAS,CAChBwC,QAAQ,CAAGb,CAAC,EAAK1B,WAAW,CAAC0B,CAAC,CAACc,MAAM,CAACF,KAAK,CAAE,CAChD,CAAC,EACD,CAAC,cAGN3C,KAAA,QAAKmC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBtC,IAAA,UAAO0C,OAAO,CAAC,OAAO,CAACL,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,eAAa,CAAO,CAAC,cACnEtC,IAAA,UACI2C,IAAI,CAAC,OAAO,CACZN,SAAS,CAAC,cAAc,CACxBO,EAAE,CAAC,OAAO,CACVC,KAAK,CAAErC,KAAM,CACbsC,QAAQ,CAAGb,CAAC,EAAKxB,QAAQ,CAACwB,CAAC,CAACc,MAAM,CAACF,KAAK,CAAE,CAC7C,CAAC,EACD,CAAC,cAGN3C,KAAA,QAAKmC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBtC,IAAA,UAAO0C,OAAO,CAAC,UAAU,CAACL,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cACjEtC,IAAA,UACI2C,IAAI,CAAC,UAAU,CACfN,SAAS,CAAC,cAAc,CACxBO,EAAE,CAAC,UAAU,CACbC,KAAK,CAAEnC,QAAS,CAChBoC,QAAQ,CAAGb,CAAC,EAAKtB,WAAW,CAACsB,CAAC,CAACc,MAAM,CAACF,KAAK,CAAE,CAChD,CAAC,EACD,CAAC,cAGN7C,IAAA,WACIqC,SAAS,CAAC,4BAA4B,CACtCW,OAAO,CAAEhC,cAAe,CACxB2B,IAAI,CAAC,QAAQ,CAAAL,QAAA,CAChB,UAED,CAAQ,CAAC,EACP,CAAC,cAGPpC,KAAA,MAAGmC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAAC,oBACV,cAAAtC,IAAA,MAAGiD,IAAI,CAAC,YAAY,CAACZ,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,OAAK,CAAG,CAAC,EAC1E,CAAC,EACH,CAAC,CACL,CAAC,CACL,CAAC,CACL,CAAC,CAEd,CAEA,cAAe,CAAAnC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}