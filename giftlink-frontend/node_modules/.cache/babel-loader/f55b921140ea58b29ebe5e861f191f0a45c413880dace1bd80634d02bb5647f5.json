{"ast":null,"code":"var _jsxFileName = \"/home/project/fullstack-capstone-project/giftlink-frontend/src/components/LoginPage/LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { urlConfig } from '../../config'; // Task 1: Import urlConfig\nimport { useAppContext } from '../../context/AuthContext'; // Task 2: Import useAppContext\nimport { useNavigate } from 'react-router-dom'; // Task 3: Import useNavigate\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [incorrect, setIncorrect] = useState(''); // Task 4: Include a state for incorrect password\n\n  const navigate = useNavigate(); // Task 5: Create a local variable for navigate\n  const bearerToken = sessionStorage.getItem('auth-token'); // Task 5: Create a local variable for bearerToken\n  const {\n    setIsLoggedIn,\n    setUserName\n  } = useAppContext(); // Task 5: Create a local variable for setIsLoggedIn\n\n  // Task 6: If the bearerToken has a value (user already logged in), navigate to MainPage\n  useEffect(() => {\n    if (bearerToken) {\n      navigate('/app');\n    }\n  }, [navigate, bearerToken]);\n  const handleLogin = async () => {\n    try {\n      const response = await fetch(`${urlConfig.backendUrl}/api/auth/login`, {\n        method: 'POST',\n        // Task 7: Set the POST method\n        headers: {\n          'Content-Type': 'application/json',\n          // Task 8: Set headers\n          Authorization: bearerToken ? `Bearer ${bearerToken}` : '' // Include Bearer token if available\n        },\n        body: JSON.stringify({\n          // Task 9: Set the body section to send user details\n          email,\n          password\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        sessionStorage.setItem('auth-token', data.authtoken); // Store auth token in session storage\n        sessionStorage.setItem('name', data.userName); // Store user name in session storage\n        setIsLoggedIn(true); // Update login state in context\n        setUserName(data.userName); // Update user name in context\n        navigate('/app'); // Navigate to the main page after successful login\n      } else {\n        const errorData = await response.json();\n        setIncorrect(errorData.error || 'Invalid credentials'); // Display error message\n      }\n    } catch (e) {\n      console.error('Error during login:', e.message);\n      setIncorrect('An unexpected error occurred. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), incorrect && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: incorrect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => e.preventDefault(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          placeholder: \"Enter your email\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          placeholder: \"Enter your password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleLogin,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\n_s(LoginPage, \"nLqF67ufWjKM3AE8jVDK1kANBfo=\", false, function () {\n  return [useNavigate, useAppContext];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useEffect","urlConfig","useAppContext","useNavigate","jsxDEV","_jsxDEV","LoginPage","_s","email","setEmail","password","setPassword","incorrect","setIncorrect","navigate","bearerToken","sessionStorage","getItem","setIsLoggedIn","setUserName","handleLogin","response","fetch","backendUrl","method","headers","Authorization","body","JSON","stringify","ok","data","json","setItem","authtoken","userName","errorData","error","e","console","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","preventDefault","type","value","onChange","target","placeholder","required","onClick","_c","$RefreshReg$"],"sources":["/home/project/fullstack-capstone-project/giftlink-frontend/src/components/LoginPage/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { urlConfig } from '../../config'; // Task 1: Import urlConfig\nimport { useAppContext } from '../../context/AuthContext'; // Task 2: Import useAppContext\nimport { useNavigate } from 'react-router-dom'; // Task 3: Import useNavigate\n\nconst LoginPage = () => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [incorrect, setIncorrect] = useState(''); // Task 4: Include a state for incorrect password\n\n    const navigate = useNavigate(); // Task 5: Create a local variable for navigate\n    const bearerToken = sessionStorage.getItem('auth-token'); // Task 5: Create a local variable for bearerToken\n    const { setIsLoggedIn, setUserName } = useAppContext(); // Task 5: Create a local variable for setIsLoggedIn\n\n    // Task 6: If the bearerToken has a value (user already logged in), navigate to MainPage\n    useEffect(() => {\n        if (bearerToken) {\n            navigate('/app');\n        }\n    }, [navigate, bearerToken]);\n\n    const handleLogin = async () => {\n        try {\n            const response = await fetch(`${urlConfig.backendUrl}/api/auth/login`, {\n                method: 'POST', // Task 7: Set the POST method\n                headers: {\n                    'Content-Type': 'application/json', // Task 8: Set headers\n                    Authorization: bearerToken ? `Bearer ${bearerToken}` : '', // Include Bearer token if available\n                },\n                body: JSON.stringify({ // Task 9: Set the body section to send user details\n                    email,\n                    password,\n                }),\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                sessionStorage.setItem('auth-token', data.authtoken); // Store auth token in session storage\n                sessionStorage.setItem('name', data.userName); // Store user name in session storage\n                setIsLoggedIn(true); // Update login state in context\n                setUserName(data.userName); // Update user name in context\n                navigate('/app'); // Navigate to the main page after successful login\n            } else {\n                const errorData = await response.json();\n                setIncorrect(errorData.error || 'Invalid credentials'); // Display error message\n            }\n        } catch (e) {\n            console.error('Error during login:', e.message);\n            setIncorrect('An unexpected error occurred. Please try again.');\n        }\n    };\n\n    return (\n        <div className=\"login-page\">\n            <h2>Login</h2>\n            {incorrect && <p className=\"error-message\">{incorrect}</p>}\n            <form onSubmit={(e) => e.preventDefault()}>\n                <div>\n                    <label>Email:</label>\n                    <input\n                        type=\"email\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                        placeholder=\"Enter your email\"\n                        required\n                    />\n                </div>\n                <div>\n                    <label>Password:</label>\n                    <input\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        placeholder=\"Enter your password\"\n                        required\n                    />\n                </div>\n                <button type=\"button\" onClick={handleLogin}>\n                    Login\n                </button>\n            </form>\n        </div>\n    );\n};\n\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}