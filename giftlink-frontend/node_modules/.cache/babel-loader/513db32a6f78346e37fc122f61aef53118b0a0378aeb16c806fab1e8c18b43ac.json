{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import'./DetailsPage.css';import{urlConfig}from'../../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DetailsPage(){const navigate=useNavigate();const{productId}=useParams();const[gift,setGift]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{// Task 1: Check for authentication and redirect if not logged in\nconst authenticationToken=sessionStorage.getItem('auth-token');if(!authenticationToken){navigate('/app/login');}// Fetch gift details\nconst fetchGift=async()=>{try{// Task 2: Fetch gift details using productId\nconst url=\"\".concat(urlConfig.backendUrl,\"/api/gifts/\").concat(productId);const response=await fetch(url);if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();setGift(data);}catch(error){setError(error.message);}finally{setLoading(false);}};fetchGift();// Task 3: Scroll to top on component mount\nwindow.scrollTo(0,0);},[productId,navigate]);// Task 4: Handle back click\nconst handleBackClick=()=>{navigate(-1);};// Hardcoded comments for this project\nconst comments=[{author:\"John Doe\",comment:\"I would like this!\"},{author:\"Jane Smith\",comment:\"Just DMed you.\"},{author:\"Alice Johnson\",comment:\"I will take it if it's still available.\"},{author:\"Mike Brown\",comment:\"This is a good one!\"},{author:\"Sarah Wilson\",comment:\"My family can use one. DM me if it is still available. Thank you!\"}];// Loading state\nif(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 text-center\",children:\"Loading...\"});// Error state\nif(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5 text-center\",children:[\"Error: \",error]});// Gift not found state\nif(!gift)return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 text-center\",children:\"Gift not found\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mb-3\",onClick:handleBackClick,children:\"Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card product-details-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header text-white\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"details-title\",children:gift.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-placeholder-large\",children:gift.image?/*#__PURE__*/_jsx(\"img\",{src:gift.image,alt:gift.name,className:\"product-image-large\"}):/*#__PURE__*/_jsx(\"div\",{className:\"no-image-available-large\",children:\"No Image Available\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",gift.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Condition:\"}),\" \",gift.condition]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date Added:\"}),\" \",new Date(gift.date_added*1000).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age (Years):\"}),\" \",gift.age_years]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",gift.description]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments-section mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-3\",children:\"Comments\"}),comments.map((comment,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"card mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"comment-author\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[comment.author,\":\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-text\",children:comment.comment})]})},index))]})]});}export default DetailsPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","urlConfig","jsx","_jsx","jsxs","_jsxs","DetailsPage","navigate","productId","gift","setGift","loading","setLoading","error","setError","authenticationToken","sessionStorage","getItem","fetchGift","url","concat","backendUrl","response","fetch","ok","Error","data","json","message","window","scrollTo","handleBackClick","comments","author","comment","className","children","onClick","name","image","src","alt","category","condition","Date","date_added","toLocaleDateString","age_years","description","map","index"],"sources":["/home/project/fullstack-capstone-project/giftlink-frontend/src/components/DetailsPage/DetailsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './DetailsPage.css';\nimport { urlConfig } from '../../config';\n\nfunction DetailsPage() {\n    const navigate = useNavigate();\n    const { productId } = useParams();\n    const [gift, setGift] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        // Task 1: Check for authentication and redirect if not logged in\n        const authenticationToken = sessionStorage.getItem('auth-token');\n        if (!authenticationToken) {\n            navigate('/app/login');\n        }\n\n        // Fetch gift details\n        const fetchGift = async () => {\n            try {\n                // Task 2: Fetch gift details using productId\n                const url = `${urlConfig.backendUrl}/api/gifts/${productId}`;\n                const response = await fetch(url);\n                if (!response.ok) {\n                    throw new Error('Network response was not ok');\n                }\n                const data = await response.json();\n                setGift(data);\n            } catch (error) {\n                setError(error.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchGift();\n\n        // Task 3: Scroll to top on component mount\n        window.scrollTo(0, 0);\n    }, [productId, navigate]);\n\n    // Task 4: Handle back click\n    const handleBackClick = () => {\n        navigate(-1);\n    };\n\n    // Hardcoded comments for this project\n    const comments = [\n        {\n            author: \"John Doe\",\n            comment: \"I would like this!\"\n        },\n        {\n            author: \"Jane Smith\",\n            comment: \"Just DMed you.\"\n        },\n        {\n            author: \"Alice Johnson\",\n            comment: \"I will take it if it's still available.\"\n        },\n        {\n            author: \"Mike Brown\",\n            comment: \"This is a good one!\"\n        },\n        {\n            author: \"Sarah Wilson\",\n            comment: \"My family can use one. DM me if it is still available. Thank you!\"\n        }\n    ];\n\n    // Loading state\n    if (loading) return <div className=\"container mt-5 text-center\">Loading...</div>;\n\n    // Error state\n    if (error) return <div className=\"container mt-5 text-center\">Error: {error}</div>;\n\n    // Gift not found state\n    if (!gift) return <div className=\"container mt-5 text-center\">Gift not found</div>;\n\n    return (\n        <div className=\"container mt-5\">\n            {/* Back button */}\n            <button className=\"btn btn-secondary mb-3\" onClick={handleBackClick}>Back</button>\n\n            {/* Gift details card */}\n            <div className=\"card product-details-card\">\n                <div className=\"card-header text-white\">\n                    <h2 className=\"details-title\">{gift.name}</h2>\n                </div>\n                <div className=\"card-body\">\n                    {/* Task 5: Display gift image */}\n                    <div className=\"image-placeholder-large\">\n                        {gift.image ? (\n                            <img src={gift.image} alt={gift.name} className=\"product-image-large\" />\n                        ) : (\n                            <div className=\"no-image-available-large\">No Image Available</div>\n                        )}\n                    </div>\n\n                    {/* Task 6: Display gift details */}\n                    <p><strong>Category:</strong> {gift.category}</p>\n                    <p><strong>Condition:</strong> {gift.condition}</p>\n                    <p><strong>Date Added:</strong> {new Date(gift.date_added * 1000).toLocaleDateString()}</p>\n                    <p><strong>Age (Years):</strong> {gift.age_years}</p>\n                    <p><strong>Description:</strong> {gift.description}</p>\n                </div>\n            </div>\n\n            {/* Task 7: Render comments section */}\n            <div className=\"comments-section mt-4\">\n                <h3 className=\"mb-3\">Comments</h3>\n                {comments.map((comment, index) => (\n                    <div key={index} className=\"card mb-3\">\n                        <div className=\"card-body\">\n                            <p className=\"comment-author\"><strong>{comment.author}:</strong></p>\n                            <p className=\"comment-text\">{comment.comment}</p>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default DetailsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}