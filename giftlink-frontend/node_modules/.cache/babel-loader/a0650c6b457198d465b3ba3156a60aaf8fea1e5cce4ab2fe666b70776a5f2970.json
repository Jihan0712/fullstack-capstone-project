{"ast":null,"code":"// src/components/MainPage/MainPage.js\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./MainPage.css';import urlConfig from'../../config/urlConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MainPage(){const[gifts,setGifts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();// Fetch gifts from backend API\nuseEffect(()=>{const fetchGifts=async()=>{try{const url=\"\".concat(urlConfig.backendUrl,\"/api/gifts\");const response=await fetch(url);if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setGifts(data);setLoading(false);}catch(err){console.error('Fetch error:',err.message);setError(err.message);setLoading(false);}};fetchGifts();},[]);// Navigate to gift details\nconst goToDetailsPage=productId=>{navigate(\"/app/product/\".concat(productId));};// Format timestamp to readable date\nconst formatDate=timestamp=>{const date=new Date(timestamp*1000);// Convert seconds to milliseconds\nreturn date.toLocaleDateString('default',{month:'long',day:'numeric',year:'numeric'});};// Show loading state\nif(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading gifts...\"})]});}// Show error state\nif(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger text-center mt-5\",role:\"alert\",children:\"Failed to load gifts. Please try again later.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Available Gifts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-4\",children:gifts.length>0?gifts.map(gift=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",role:\"button\",tabIndex:\"0\",onKeyDown:()=>goToDetailsPage(gift.id),onClick:()=>goToDetailsPage(gift.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 shadow-sm border-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-placeholder\",children:gift.image?/*#__PURE__*/_jsx(\"img\",{src:gift.image,alt:gift.name,className:\"card-img-top\",style:{height:'200px',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"div\",{className:\"no-image-available d-flex align-items-center justify-content-center\",style:{height:'200px',backgroundColor:'#f8f9fa'},children:\"No Image Available\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:gift.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text text-muted mt-auto\",children:[\"Added: \",formatDate(gift.date_added)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer bg-white border-0\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-100\",onClick:e=>{e.stopPropagation();// Prevent card click\ngoToDetailsPage(gift.id);},children:\"View Details\"})})]})},gift.id)):/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No gifts available at the moment.\"})})})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","urlConfig","jsx","_jsx","jsxs","_jsxs","MainPage","gifts","setGifts","loading","setLoading","error","setError","navigate","fetchGifts","url","concat","backendUrl","response","fetch","ok","Error","status","data","json","err","console","message","goToDetailsPage","productId","formatDate","timestamp","date","Date","toLocaleDateString","month","day","year","className","children","role","length","map","gift","tabIndex","onKeyDown","id","onClick","image","src","alt","name","style","height","objectFit","backgroundColor","date_added","e","stopPropagation"],"sources":["/home/project/fullstack-capstone-project/giftlink-frontend/src/components/MainPage/MainPage.js"],"sourcesContent":["// src/components/MainPage/MainPage.js\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './MainPage.css';\nimport urlConfig from '../../config/urlConfig';\n\nexport default function MainPage() {\n    const [gifts, setGifts] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const navigate = useNavigate();\n\n    // Fetch gifts from backend API\n    useEffect(() => {\n        const fetchGifts = async () => {\n            try {\n                const url = `${urlConfig.backendUrl}/api/gifts`;\n                const response = await fetch(url);\n\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n\n                const data = await response.json();\n                setGifts(data);\n                setLoading(false);\n            } catch (err) {\n                console.error('Fetch error:', err.message);\n                setError(err.message);\n                setLoading(false);\n            }\n        };\n\n        fetchGifts();\n    }, []);\n\n    // Navigate to gift details\n    const goToDetailsPage = (productId) => {\n        navigate(`/app/product/${productId}`);\n    };\n\n    // Format timestamp to readable date\n    const formatDate = (timestamp) => {\n        const date = new Date(timestamp * 1000); // Convert seconds to milliseconds\n        return date.toLocaleDateString('default', {\n            month: 'long',\n            day: 'numeric',\n            year: 'numeric',\n        });\n    };\n\n    // Show loading state\n    if (loading) {\n        return (\n            <div className=\"text-center mt-5\">\n                <div className=\"spinner-border text-primary\" role=\"status\">\n                    <span className=\"visually-hidden\">Loading...</span>\n                </div>\n                <p>Loading gifts...</p>\n            </div>\n        );\n    }\n\n    // Show error state\n    if (error) {\n        return (\n            <div className=\"alert alert-danger text-center mt-5\" role=\"alert\">\n                Failed to load gifts. Please try again later.\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"container mt-5\">\n            <h2 className=\"text-center mb-4\">Available Gifts</h2>\n\n            {/* Gifts Grid */}\n            <div className=\"row g-4\">\n                {gifts.length > 0 ? (\n                    gifts.map((gift) => (\n                        <div\n                            key={gift.id}\n                            className=\"col-md-4\"\n                            role=\"button\"\n                            tabIndex=\"0\"\n                            onKeyDown={() => goToDetailsPage(gift.id)}\n                            onClick={() => goToDetailsPage(gift.id)}\n                        >\n                            <div className=\"card h-100 shadow-sm border-0\">\n                                <div className=\"image-placeholder\">\n                                    {gift.image ? (\n                                        <img\n                                            src={gift.image}\n                                            alt={gift.name}\n                                            className=\"card-img-top\"\n                                            style={{ height: '200px', objectFit: 'cover' }}\n                                        />\n                                    ) : (\n                                        <div className=\"no-image-available d-flex align-items-center justify-content-center\"\n                                             style={{ height: '200px', backgroundColor: '#f8f9fa' }}>\n                                            No Image Available\n                                        </div>\n                                    )}\n                                </div>\n                                <div className=\"card-body d-flex flex-column\">\n                                    <h5 className=\"card-title\">{gift.name}</h5>\n                                    <p className=\"card-text text-muted mt-auto\">\n                                        Added: {formatDate(gift.date_added)}\n                                    </p>\n                                </div>\n                                <div className=\"card-footer bg-white border-0\">\n                                    <button\n                                        className=\"btn btn-primary w-100\"\n                                        onClick={(e) => {\n                                            e.stopPropagation(); // Prevent card click\n                                            goToDetailsPage(gift.id);\n                                        }}\n                                    >\n                                        View Details\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                ) : (\n                    <div className=\"col-12 text-center\">\n                        <p>No gifts available at the moment.</p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,gBAAgB,CACvB,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAG,CAC/B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAe,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9B;AACAD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAe,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACA,KAAM,CAAAC,GAAG,IAAAC,MAAA,CAAMf,SAAS,CAACgB,UAAU,cAAY,CAC/C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACJ,GAAG,CAAC,CAEjC,GAAI,CAACG,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,wBAAAL,MAAA,CAAwBE,QAAQ,CAACI,MAAM,CAAE,CAAC,CAC7D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClChB,QAAQ,CAACe,IAAI,CAAC,CACdb,UAAU,CAAC,KAAK,CAAC,CACrB,CAAE,MAAOe,GAAG,CAAE,CACVC,OAAO,CAACf,KAAK,CAAC,cAAc,CAAEc,GAAG,CAACE,OAAO,CAAC,CAC1Cf,QAAQ,CAACa,GAAG,CAACE,OAAO,CAAC,CACrBjB,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAEDI,UAAU,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAc,eAAe,CAAIC,SAAS,EAAK,CACnChB,QAAQ,iBAAAG,MAAA,CAAiBa,SAAS,CAAE,CAAC,CACzC,CAAC,CAED;AACA,KAAM,CAAAC,UAAU,CAAIC,SAAS,EAAK,CAC9B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,SAAS,CAAG,IAAI,CAAC,CAAE;AACzC,MAAO,CAAAC,IAAI,CAACE,kBAAkB,CAAC,SAAS,CAAE,CACtCC,KAAK,CAAE,MAAM,CACbC,GAAG,CAAE,SAAS,CACdC,IAAI,CAAE,SACV,CAAC,CAAC,CACN,CAAC,CAED;AACA,GAAI5B,OAAO,CAAE,CACT,mBACIJ,KAAA,QAAKiC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BpC,IAAA,QAAKmC,SAAS,CAAC,6BAA6B,CAACE,IAAI,CAAC,QAAQ,CAAAD,QAAA,cACtDpC,IAAA,SAAMmC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,CAClD,CAAC,cACNpC,IAAA,MAAAoC,QAAA,CAAG,kBAAgB,CAAG,CAAC,EACtB,CAAC,CAEd,CAEA;AACA,GAAI5B,KAAK,CAAE,CACP,mBACIR,IAAA,QAAKmC,SAAS,CAAC,qCAAqC,CAACE,IAAI,CAAC,OAAO,CAAAD,QAAA,CAAC,+CAElE,CAAK,CAAC,CAEd,CAEA,mBACIlC,KAAA,QAAKiC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3BpC,IAAA,OAAImC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAGrDpC,IAAA,QAAKmC,SAAS,CAAC,SAAS,CAAAC,QAAA,CACnBhC,KAAK,CAACkC,MAAM,CAAG,CAAC,CACblC,KAAK,CAACmC,GAAG,CAAEC,IAAI,eACXxC,IAAA,QAEImC,SAAS,CAAC,UAAU,CACpBE,IAAI,CAAC,QAAQ,CACbI,QAAQ,CAAC,GAAG,CACZC,SAAS,CAAEA,CAAA,GAAMjB,eAAe,CAACe,IAAI,CAACG,EAAE,CAAE,CAC1CC,OAAO,CAAEA,CAAA,GAAMnB,eAAe,CAACe,IAAI,CAACG,EAAE,CAAE,CAAAP,QAAA,cAExClC,KAAA,QAAKiC,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC1CpC,IAAA,QAAKmC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC7BI,IAAI,CAACK,KAAK,cACP7C,IAAA,QACI8C,GAAG,CAAEN,IAAI,CAACK,KAAM,CAChBE,GAAG,CAAEP,IAAI,CAACQ,IAAK,CACfb,SAAS,CAAC,cAAc,CACxBc,KAAK,CAAE,CAAEC,MAAM,CAAE,OAAO,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAClD,CAAC,cAEFnD,IAAA,QAAKmC,SAAS,CAAC,qEAAqE,CAC/Ec,KAAK,CAAE,CAAEC,MAAM,CAAE,OAAO,CAAEE,eAAe,CAAE,SAAU,CAAE,CAAAhB,QAAA,CAAC,oBAE7D,CAAK,CACR,CACA,CAAC,cACNlC,KAAA,QAAKiC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eACzCpC,IAAA,OAAImC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEI,IAAI,CAACQ,IAAI,CAAK,CAAC,cAC3C9C,KAAA,MAAGiC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,EAAC,SACjC,CAACT,UAAU,CAACa,IAAI,CAACa,UAAU,CAAC,EACpC,CAAC,EACH,CAAC,cACNrD,IAAA,QAAKmC,SAAS,CAAC,+BAA+B,CAAAC,QAAA,cAC1CpC,IAAA,WACImC,SAAS,CAAC,uBAAuB,CACjCS,OAAO,CAAGU,CAAC,EAAK,CACZA,CAAC,CAACC,eAAe,CAAC,CAAC,CAAE;AACrB9B,eAAe,CAACe,IAAI,CAACG,EAAE,CAAC,CAC5B,CAAE,CAAAP,QAAA,CACL,cAED,CAAQ,CAAC,CACR,CAAC,EACL,CAAC,EAxCDI,IAAI,CAACG,EAyCT,CACR,CAAC,cAEF3C,IAAA,QAAKmC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cAC/BpC,IAAA,MAAAoC,QAAA,CAAG,mCAAiC,CAAG,CAAC,CACvC,CACR,CACA,CAAC,EACL,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}