{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{urlConfig}from'../../config';import'./DetailsPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DetailsPage(){const[gift,setGift]=useState(null);const[comments,setComments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{productId}=useParams();const navigate=useNavigate();// Task 1: Check for authentication\nuseEffect(()=>{const token=sessionStorage.getItem('token');if(!token){navigate('/app/login');}},[navigate]);// Task 2 & 8: Fetch gift details using product ID\nuseEffect(()=>{const fetchGiftDetails=async()=>{try{const response=await fetch(\"\".concat(urlConfig.backendUrl,\"/api/gifts/\").concat(productId));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setGift(data);setComments(data.comments||[]);}catch(err){setError(err.message);}finally{setLoading(false);}};fetchGiftDetails();// Task 3: Scroll to top on mount\nwindow.scrollTo(0,0);},[productId]);// Task 4: Navigate back\nconst handleGoBack=()=>{navigate(-1);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 text-center\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Loading gift details...\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5 text-center\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Error fetching gift: \",error]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleGoBack,children:\"Go Back\"})]});}if(!gift){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Gift not found.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleGoBack,children:\"Go Back\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 offset-md-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link mb-3\",onClick:handleGoBack,children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-4\",children:gift.image?/*#__PURE__*/_jsx(\"img\",{src:gift.image,alt:gift.name,className:\"product-image-large img-fluid\"}):/*#__PURE__*/_jsx(\"div\",{className:\"no-image-available p-4 bg-light border rounded\",children:\"No Image Available\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:gift.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",gift.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Condition:\"}),\" \",gift.condition]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",gift.age]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date Added:\"}),\" \",new Date(gift.date_added*1000).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",gift.description]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Comments\"}),comments.length>0?/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:comments.map((comment,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[comment.user||\"Anonymous\",\":\"]}),\" \",comment.text]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No comments yet.\"})]})]})})]})})});}export default DetailsPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","urlConfig","jsx","_jsx","jsxs","_jsxs","DetailsPage","gift","setGift","comments","setComments","loading","setLoading","error","setError","productId","navigate","token","sessionStorage","getItem","fetchGiftDetails","response","fetch","concat","backendUrl","ok","Error","status","data","json","err","message","window","scrollTo","handleGoBack","className","children","onClick","image","src","alt","name","category","condition","age","Date","date_added","toLocaleDateString","description","length","map","comment","index","user","text"],"sources":["/home/project/fullstack-capstone-project/giftlink-frontend/src/components/DetailsPage/DetailsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { urlConfig } from '../../config';\nimport './DetailsPage.css';\n\nfunction DetailsPage() {\n    const [gift, setGift] = useState(null);\n    const [comments, setComments] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    const { productId } = useParams();\n    const navigate = useNavigate();\n\n    // Task 1: Check for authentication\n    useEffect(() => {\n        const token = sessionStorage.getItem('token');\n        if (!token) {\n            navigate('/app/login');\n        }\n    }, [navigate]);\n\n    // Task 2 & 8: Fetch gift details using product ID\n    useEffect(() => {\n        const fetchGiftDetails = async () => {\n            try {\n                const response = await fetch(`${urlConfig.backendUrl}/api/gifts/${productId}`);\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                setGift(data);\n                setComments(data.comments || []);\n            } catch (err) {\n                setError(err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchGiftDetails();\n\n        // Task 3: Scroll to top on mount\n        window.scrollTo(0, 0);\n    }, [productId]);\n\n    // Task 4: Navigate back\n    const handleGoBack = () => {\n        navigate(-1);\n    };\n\n    if (loading) {\n        return (\n            <div className=\"container mt-5 text-center\">\n                <h3>Loading gift details...</h3>\n            </div>\n        );\n    }\n\n    if (error) {\n        return (\n            <div className=\"container mt-5 text-center\">\n                <h3>Error fetching gift: {error}</h3>\n                <button className=\"btn btn-secondary\" onClick={handleGoBack}>Go Back</button>\n            </div>\n        );\n    }\n\n    if (!gift) {\n        return (\n            <div className=\"container mt-5 text-center\">\n                <h3>Gift not found.</h3>\n                <button className=\"btn btn-secondary\" onClick={handleGoBack}>Go Back</button>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"container mt-5\">\n            <div className=\"row\">\n                <div className=\"col-md-8 offset-md-2\">\n                    <button className=\"btn btn-link mb-3\" onClick={handleGoBack}>\n                        ‚Üê Back\n                    </button>\n\n                    <div className=\"card shadow-sm\">\n                        <div className=\"card-body\">\n                            {/* Task 5: Display Gift Image */}\n                            <div className=\"text-center mb-4\">\n                                {gift.image ? (\n                                    <img\n                                        src={gift.image}\n                                        alt={gift.name}\n                                        className=\"product-image-large img-fluid\"\n                                    />\n                                ) : (\n                                    <div className=\"no-image-available p-4 bg-light border rounded\">\n                                        No Image Available\n                                    </div>\n                                )}\n                            </div>\n\n                            {/* Task 6: Display Gift Details */}\n                            <h3 className=\"card-title\">{gift.name}</h3>\n                            <p><strong>Category:</strong> {gift.category}</p>\n                            <p><strong>Condition:</strong> {gift.condition}</p>\n                            <p><strong>Age:</strong> {gift.age}</p>\n                            <p><strong>Date Added:</strong> {new Date(gift.date_added * 1000).toLocaleDateString()}</p>\n                            <p><strong>Description:</strong> {gift.description}</p>\n\n                            {/* Task 7: Render Comments Section */}\n                            <div className=\"mt-4\">\n                                <h5>Comments</h5>\n                                {comments.length > 0 ? (\n                                    <ul className=\"list-group\">\n                                        {comments.map((comment, index) => (\n                                            <li key={index} className=\"list-group-item\">\n                                                <strong>{comment.user || \"Anonymous\"}:</strong> {comment.text}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                ) : (\n                                    <p>No comments yet.</p>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default DetailsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}